<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C Language Quiz</title>
    <script src="quizFunctions.js" defer></script>
    <link rel="stylesheet" href="quesstyles.css">
</head>
<body>
    <header>
        <h1>ProgQuiz - C Language Advanced Level</h1>
    </header>
    <div class="container">
        <h2>C Language Advanced Quiz</h2>
        <p>Test your advanced knowledge of C programming Language.</p>
        <form id="quizForm">

<div class="quiz-question" data-question="1">
                <h3>1. What will happen if a return statement is omitted in a non-void function in C?</h3>
                <input type="radio" name="q1" value="A"> A. The function will return a default value of zero.<br>
                <input type="radio" name="q1" value="B"> B. The compiler will generate an error.<br>
                <input type="radio" name="q1" value="C" class="correct"> C. The function will return an indeterminate value.<br>
                <input type="radio" name="q1" value="D"> D. The function will not compile.<br>
                <div class="description incorrect" id="desc-q1-wrong">Incorrect. Omitting a return statement in a non-void function results in an indeterminate value, not a default value of zero or an error.</div>
                <div class="description correct" id="desc-q1-correct">Correct! Omitting a return statement in a non-void function results in returning an indeterminate value. This behavior is due to undefined results when the function does not explicitly return a value.</div>
                <div class="navigation-buttons">
                    <button type="button" class="show-description" onclick="showDescription(1)">Show Description</button>
                    <button type="button" class="next-question" onclick="nextQuestion()">Next</button>
                </div>
            </div>
            <div class="quiz-question" data-question="2">
                <h3>2. In C, how is memory allocated for a variable declared as static inside a function?</h3>
                <input type="radio" name="q2" value="A"> A. On the stack.<br>
                <input type="radio" name="q2" value="B"> B. On the heap.<br>
                <input type="radio" name="q2" value="C" class="correct"> C. In the global data segment.<br>
                <input type="radio" name="q2" value="D"> D. In the local data segment.<br>
                <div class="description incorrect" id="desc-q2-wrong">Incorrect. Static variables inside functions are stored in the global data segment, not on the stack, heap, or local data segment.</div>
                <div class="description correct" id="desc-q2-correct">Correct! Memory for a static variable inside a function is allocated in the global data segment, which retains its value between function calls.</div>
                <div class="navigation-buttons">
                    <button type="button" class="show-description" onclick="showDescription(2)">Show Description</button>
                    <button type="button" class="next-question" onclick="nextQuestion()">Next</button>
                </div>
            </div>
            <div class="quiz-question" data-question="3">
                <h3>3. Which of the following is true about typedef in C?</h3>
                <input type="radio" name="q3" value="A" class="correct"> A. It creates an alias for an existing data type.<br>
                <input type="radio" name="q3" value="B"> B. It can be used to create new data types.<br>
                <input type="radio" name="q3" value="C"> C. It changes the size of the data type.<br>
                <input type="radio" name="q3" value="D"> D. It is used to define a constant value.<br>
                <div class="description incorrect" id="desc-q3-wrong">Incorrect. `typedef` does not create new data types or change the size of existing data types; it only provides a new name for an existing type.</div>
                <div class="description correct" id="desc-q3-correct">Correct! `typedef` in C creates an alias for an existing data type, allowing for easier type management and code readability.</div>
                <div class="navigation-buttons">
                    <button type="button" class="show-description" onclick="showDescription(3)">Show Description</button>
                    <button type="button" class="next-question" onclick="nextQuestion()">Next</button>
                </div>
            </div>
            <div class="quiz-question" data-question="4">
                <h3>4. What does the void keyword signify when used as a function return type in C?</h3>
                <input type="radio" name="q4" value="A"> A. The function will return a pointer.<br>
                <input type="radio" name="q4" value="B" class="correct"> B. The function will not return a value.<br>
                <input type="radio" name="q4" value="C"> C. The function will return an integer.<br>
                <input type="radio" name="q4" value="D"> D. The function will return a floating-point number.<br>
                <div class="description incorrect" id="desc-q4-wrong">Incorrect. The `void` keyword as a return type indicates that the function does not return any value, not a pointer, integer, or floating-point number.</div>
                <div class="description correct" id="desc-q4-correct">Correct! The `void` keyword signifies that a function does not return a value. It is used to indicate that the function is intended to perform operations without producing a result.</div>
                <div class="navigation-buttons">
                    <button type="button" class="show-description" onclick="showDescription(4)">Show Description</button>
                    <button type="button" class="next-question" onclick="nextQuestion()">Next</button>
                </div>
            </div>
            <div class="quiz-question" data-question="5">
                <h3>5. In C, what is the effect of using the volatile keyword on a variable?</h3>
                <input type="radio" name="q5" value="A"> A. The variable is optimized away by the compiler.<br>
                <input type="radio" name="q5" value="B" class="correct"> B. The variable’s value is read and written directly from memory.<br>
                <input type="radio" name="q5" value="C"> C. The variable's value is cached in a register.<br>
                <input type="radio" name="q5" value="D"> D. The variable is considered to be immutable.<br>
                <div class="description incorrect" id="desc-q5-wrong">Incorrect. The `volatile` keyword ensures that a variable is read and written directly from memory, rather than being cached in a register or optimized away.</div>
                <div class="description correct" id="desc-q5-correct">Correct! The `volatile` keyword indicates that a variable’s value is read and written directly from memory, preventing the compiler from optimizing it away.</div>
                <div class="navigation-buttons">
                    <button type="button" class="show-description" onclick="showDescription(5)">Show Description</button>
                    <button type="button" class="next-question" onclick="nextQuestion()">Next</button>
                </div>
            </div>

 <div class="quiz-question" data-question="6">
                <h3>6. What will be the output of the following C code?</h3>
                <pre><code>
#include &lt;stdio.h&gt;
void func(int *x) {
    *x = 20;
}
int main() {
    int a = 10;
    func(&a);
    printf("%d", a);
    return 0;
}
                </code></pre>
                <input type="radio" name="q6" value="A"> A. 10<br>
                <input type="radio" name="q6" value="B" class="correct"> B. 20<br>
                <input type="radio" name="q6" value="C"> C. Undefined<br>
                <input type="radio" name="q6" value="D"> D. Compiler Error<br>
                <div class="description incorrect" id="desc-q6-wrong">Incorrect. The output of the code will be `20`, as the `func` function changes the value of `a` to `20`.</div>
                <div class="description correct" id="desc-q6-correct">Correct! The output of the code will be `20` because the `func` function modifies the value of `a` to `20` through a pointer.</div>
                <div class="navigation-buttons">
                    <button type="button" class="show-description" onclick="showDescription(6)">Show Description</button>
                    <button type="button" class="next-question" onclick="nextQuestion()">Next</button>
                </div>
            </div>
            <div class="quiz-question" data-question="7">
                <h3>7. What will be the output of the following C code?</h3>
                <pre><code>
#include &lt;stdio.h&gt;
int main() {
    int x = 5;
    int *ptr = &x;
    printf("%d", *ptr);
    return 0;
}
                </code></pre>
                <input type="radio" name="q7" value="A"> A. Address of x<br>
                <input type="radio" name="q7" value="B" class="correct"> B. 5<br>
                <input type="radio" name="q7" value="C"> C. Garbage Value<br>
                <input type="radio" name="q7" value="D"> D. Compiler Error<br>
                <div class="description incorrect" id="desc-q7-wrong">Incorrect. The output of the code will be `5`, not the address of `x`, garbage value, or a compiler error.</div>
                <div class="description correct" id="desc-q7-correct">Correct! The output of the code will be `5`, which is the value pointed to by `ptr`. The pointer `ptr` holds the address of the variable `x`.</div>
                <div class="navigation-buttons">
                    <button type="button" class="show-description" onclick="showDescription(7)">Show Description</button>
                    <button type="button" class="next-question" onclick="nextQuestion()">Next</button>
                </div>
            </div>
            <div class="quiz-question" data-question="8">
                <h3>8. What will be the output of the following C code?</h3>
                <pre><code>
#include &lt;stdio.h&gt;
#define SQUARE(x) x*x
int main() {
    int y;
    y = SQUARE(3 + 2);
    printf("%d", y);
    return 0;
}
                </code></pre>
                <input type="radio" name="q8" value="A"> A. 25<br>
                <input type="radio" name="q8" value="B" class="correct"> B. 13<br>
                <input type="radio" name="q8" value="C"> C. 9<br>
                <input type="radio" name="q8" value="D"> D. 30<br>
                <div class="description incorrect" id="desc-q8-wrong">Incorrect. The macro `SQUARE(x)` is not enclosed in parentheses, so `SQUARE(3 + 2)` evaluates to `13`, not `25`.</div>
                <div class="description correct" id="desc-q8-correct">Correct! The macro `SQUARE(x)` expands to `x*x`. Therefore, `SQUARE(3 + 2)` results in `3 + 2 * 3 + 2`, which evaluates to `13`.</div>
                <div class="navigation-buttons">
                    <button type="button" class="show-description" onclick="showDescription(8)">Show Description</button>
                    <button type="button" class="next-question" onclick="nextQuestion()">Next</button>
                </div>
            </div>
            <div class="quiz-question" data-question="9">
                <h3>9. What will be the output of the following C code?</h3>
                <pre><code>
#include &lt;stdio.h&gt;
int main() {
    int arr[] = {10, 20, 30, 40, 50};
    int *ptr = arr;
    printf("%d", *(ptr + 2));
    return 0;
}
                </code></pre>
                <input type="radio" name="q9" value="A"> A. 10<br>
                <input type="radio" name="q9" value="B"> B. 20<br>
                <input type="radio" name="q9" value="C" class="correct"> C. 30<br>
                <input type="radio" name="q9" value="D"> D. 40<br>
                <div class="description incorrect" id="desc-q9-wrong">Incorrect. The output of the code is `30`, which is the value at the third position in the array, not `10`, `20`, or `40`.</div>
                <div class="description correct" id="desc-q9-correct">Correct! The output of the code is `30`, as `ptr + 2` points to the third element of the array `arr`, which is `30`.</div>
                <div class="navigation-buttons">
                    <button type="button" class="show-description" onclick="showDescription(9)">Show Description</button>
                    <button type="button" class="next-question" onclick="nextQuestion()">Next</button>
                </div>
            </div>
            <div class="quiz-question" data-question="10">
                <h3>10. What will be the output of the following C code?</h3>
                <pre><code>
#include &lt;stdio.h&gt;
int main() {
    int i = 0;
    while(i < 5) {
        if(i == 3) {
            i++;
            continue;
        }
        printf("%d ", i);
        i++;
    }
    return 0;
}
                </code></pre>
                <input type="radio" name="q10" value="A"> A. 0 1 2 3 4<br>
                <input type="radio" name="q10" value="B"> B. 0 1 2 3<br>
                <input type="radio" name="q10" value="C" class="correct"> C. 0 1 2 4<br>
                <input type="radio" name="q10" value="D"> D. 0 1 2 4 5<br>
                <div class="description incorrect" id="desc-q10-wrong">Incorrect. The code outputs `0 1 2 4`, as the value `3` is skipped due to the `continue` statement.</div>
                <div class="description correct" id="desc-q10-correct">Correct! The output of the code is `0 1 2 4`. The `continue` statement skips the iteration when `i` equals `3`.</div>
                <div class="navigation-buttons">
                    <button type="button" class="show-description" onclick="showDescription(10)">Show Description</button>
                    <button type="button" class="next-question" id="finishQuizButton" onclick="submitQuiz()">Finish Quiz</button>
                </div>
            </div>
        </form>
        <div id="result"></div>
    </div>
    <script>
        let currentQuestion = 1;
        const totalQuestions = 10;
        const correctAnswers = ['C', 'C', 'A', 'B', 'B', 'B', 'B', 'B', 'C', 'C'];

        function showQuestion(questionNumber) {
            document.querySelectorAll('.quiz-question').forEach((el) => {
                el.style.display = 'none';
            });
            document.querySelector(`.quiz-question[data-question="${questionNumber}"]`).style.display = 'block';
        }

        function submitQuiz() {
            let score = 0;

            // Loop through all questions and check answers
            for (let i = 1; i <= totalQuestions; i++) {
            const selectedAnswer = document.querySelector(`input[name="q${i}"]:checked`);
            if (selectedAnswer) {
                if (selectedAnswer.classList.contains('correct')) {
                    score++;
                }
            }
            // Display the result
            const resultContainer = document.getElementById('result');
            resultContainer.innerHTML = `<h2>Your Score: ${score} out of ${totalQuestions}</h2>`;


            if (score === totalQuestions) {
                quote = "🎉 Excellent work! You nailed every question! 🎉";
            } else if (score >= totalQuestions * 0.7) {
                quote = "👍 Great job! You're quite knowledgeable in C! 👍";
            } else {
                quote = "💪 Good effort! Keep practicing to improve your skills! 💪";
            }

             document.getElementById('result').innerHTML = `
                 <h2>Your score is ${score} out of ${totalQuestions}.</h2>
                <div class="quote">${quote}</div>
                <h3>Learn More:</h3>
                 <ul>
                     <li><a href="https://www.learn-c.org" target="_blank">Learn C - A Free Interactive C Tutorial</a></li>
                     <li><a href="https://www.tutorialspoint.com/cprogramming/index.htm" target="_blank">TutorialsPoint - C Programming</a></li>
                     <li><a href="https://www.geeksforgeeks.org/c-programming-language/" target="_blank">GeeksforGeeks - C Programming Language</a></li>       
                     <li><a href="https://www.cprogramming.com/" target="_blank">CProgramming.com - C Programming Resources</a></li>
                 </ul>
            `;

            // Optionally, you can store the score in sessionStorage or send it to the server
            const username = sessionStorage.getItem('username'); // Assuming you store the username in sessionStorage
            if (username) {
                // Send score to server or store it
                console.log(`User: ${username}, Score: ${score}`);
            }
          }
        }

        function showDescription(questionNumber) {
            const selectedValue = document.querySelector(`.quiz-question[data-question="${questionNumber}"] input[type="radio"]:checked`);
            const descriptionCorrect = document.getElementById(`desc-q${questionNumber}-correct`);
            const descriptionWrong = document.getElementById(`desc-q${questionNumber}-wrong`);

            if (selectedValue) {
                if (selectedValue.value === correctAnswers[questionNumber - 1]) {
                    descriptionCorrect.style.display = 'block';
                    descriptionWrong.style.display = 'none';
                } else {
                    descriptionCorrect.style.display = 'none';
                    descriptionWrong.style.display = 'block';
                }
                // Disable radio buttons after showing description
                document.querySelectorAll(`.quiz-question[data-question="${questionNumber}"] input[type="radio"]`).forEach((el) => {
                    el.classList.add('disabled');
                    el.disabled = true;
                });
            } else {
                descriptionCorrect.style.display = 'none';
                descriptionWrong.style.display = 'none';
            }
        }

        function calculateScore() {
            let score = 0;

            // Get all the questions
            const questions = document.querySelectorAll('.quiz-question');

            questions.forEach((question) => {
                const selectedAnswer = question.querySelector('input[type="radio"]:checked');
                if (selectedAnswer && selectedAnswer.classList.contains('correct')) {
                    score += 1;
                }
            });

            return score;
        }

        function nextQuestion() {
            const selectedValue = document.querySelector(`.quiz-question[data-question="${currentQuestion}"] input[type="radio"]:checked`);
            if (selectedValue) {
                currentQuestion++;
                if (currentQuestion > totalQuestions) {
                    showScore();
                } else {
                    showQuestion(currentQuestion);
                }
            } else {
                alert('Please select an answer before proceeding.');
            }
        }

        async function submitQuizResults(score) {

            const submitButton = document.getElementById('finishQuizButton'); // Make sure to give your button an ID
            submitButton.disabled = true; // Disable the button to prevent multiple clicks
            const username = sessionStorage.getItem('username');
            const email = sessionStorage.getItem('email');
            const language = 'C'; // adjust based on your quiz logic
            const difficulty_level = 'Advanced'; // adjust based on your quiz logic

            console.log('Submitting score for:', { username, email, language: 'C', difficulty_level: 'Advanced', score });

            const scoreData = {
        username,
        email,
        language,
        difficulty_level,
        score,
    };

    try {
        const response = await fetch('http://localhost:3000/submit-score', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(scoreData),
        });

        if (!response.ok) {
            const error = response.text();
            console.error('Error submitting score:', error);
            //alert('Error submitting score. Please try again.');
        } else {
            const result = response.json();
            console.log('Score submitted successfully:', result);
            //alert('Score submitted successfully!');
            showScore();
        }
    } catch (error) {
        console.error('Error submitting score:', error);
       // alert('Error submitting score. Please try again.');
    } finally {
        submitButton.disabled = false; // Re-enable the button if needed
    }
}
        // Event listener for the finish quiz button
        document.getElementById('finishQuizButton').addEventListener('click', () => {
            const score = calculateScore();
            submitQuizResults(score);
        });

        // Show the first question on load
        showQuestion(currentQuestion);
    </script>
</body>
</html>